<%= turbo_frame_tag "friendbutton_#{user.id}" do %>
  <% if current_user.sent.pending.exists?(reciver_id: user.id) %>
    <%= button_to "Pending" %>
  <% elsif friendship = current_user.received.pending.find_by(sender_id: user.id) %>
    <%= button_to "accept", friendship_path(friendship.id, status: Friendship.friendship_statuses[:accepted]), method: :patch %>
    <%= button_to "reject", friendship_path(friendship.id, status: Friendship.friendship_statuses[:rejected]), method: :patch %>
  <% elsif current_user.accepted_friends_ids.exclude?(user.id) %>
    <%= turbo_frame_tag "fbutton_#{user.id}" do %>
      <%if friendship = current_user.sent.rejected.find_by(reciver_id: user.id) %>
        <%= button_to "Add Friend(rejected before)", friendship_path(friendship.id, status: Friendship.friendship_statuses[:pending]), method: :patch %>
      <%else %>
        <%= button_to "Add Friend", friendships_path(fid:user.id), method: :post %>
      <% end %>
    <% end %>
  <% end %>
<% end %>